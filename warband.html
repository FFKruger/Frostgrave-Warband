<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Frostgrave Warband Manager</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* ... MANTENHA O CSS DO TEMA AZUL ANTERIOR ... */
  </style>
</head>
<body>
<main>
  <h1>Frostgrave Warband Manager</h1>
  <nav id="tabnav">
    <button data-tab="dashboard" class="active" type="button">Warband</button>
    <button data-tab="magias" type="button">Magias</button>
    <button data-tab="itens" type="button">Itens</button>
    <button data-tab="notas" type="button">Notas</button>
    <button data-tab="bestiario" type="button">Bestiário</button>
  </nav>
  <section id="dashboard" class="tab-content active">
    <div class="warband-header">
      <h2>Warband</h2>
      <div class="gold-xp-box">
        <span class="gold-xp-label">Gold:
          <button class="gold-btn" onclick="alteraGold(-10)">-</button>
          <input id="gold-input" class="gold-xp-input" type="number" min="0" value="500" onchange="setGold(this.value)">
          <button class="gold-btn" onclick="alteraGold(10)">+</button>
        </span>
        <span class="gold-xp-label">XP:
          <button class="xp-btn" onclick="alteraXP(-10)">-</button>
          <input id="xp-input" class="gold-xp-input" type="number" min="0" value="0" onchange="setXP(this.value)">
          <button class="xp-btn" onclick="alteraXP(10)">+</button>
        </span>
      </div>
    </div>
    <div class="section-title">Mago & Aprendiz</div>
    <div class="character-group" id="mago-aprendiz-lista"></div>
    <div class="section-title">Soldados</div>
    <div class="character-group" id="soldado-lista"></div>
  </section>
  <section id="magias" class="tab-content">
    <h2>Banco de Magias</h2>
    <ul id="banco-magias-lista" class="magias-list"></ul>
  </section>
  <section id="itens" class="tab-content">
    <h2>Banco de Itens</h2>
    <ul id="banco-itens-lista" class="itens-list"></ul>
  </section>
  <section id="notas" class="tab-content">
    <h2>Anotações da Warband</h2>
    <textarea class="notes-box" id="notas-box" placeholder="Anote estratégias, progresso, tesouros, eventos..."></textarea>
  </section>
  <section id="bestiario" class="tab-content">
    <h2>Bestiário</h2>
    <div id="bestiary-list" class="bestiary-list"></div>
  </section>
</main>
<script>
/* --- Troca de abas --- */
document.getElementById('tabnav').addEventListener('click', function(e) {
  if (e.target.tagName === "BUTTON") {
    document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
    e.target.classList.add('active');
    document.querySelectorAll('.tab-content').forEach(tabEl => tabEl.classList.remove('active'));
    let tab = e.target.getAttribute('data-tab');
    let tabSection = document.getElementById(tab);
    if (tabSection) tabSection.classList.add('active');
    if (tab === 'bestiario') renderBestiario();
    if (tab === 'magias') renderBancoMagias();
    if (tab === 'itens') renderBancoItens();
    if (tab === 'dashboard') renderPersonagens();
  }
});

function alteraGold(delta) {
  let input = document.getElementById("gold-input");
  if (input) input.value = Math.max(0, parseInt(input.value) + delta);
}
function setGold(val) {
  let input = document.getElementById("gold-input");
  if (input) input.value = Math.max(0, parseInt(val) || 0);
}
function alteraXP(delta) {
  let input = document.getElementById("xp-input");
  if (input) input.value = Math.max(0, parseInt(input.value) + delta);
}
function setXP(val) {
  let input = document.getElementById("xp-input");
  if (input) input.value = Math.max(0, parseInt(val) || 0);
}

/* --- JSON COMPLETO --- */
const conteudo_frostgrave_json = {
  "magias": [
    {"nome": "Elemental Bolt", "escola": "Elementalist", "descricao": "Projétil elemental de energia pura.", "alcance": "24\""},
    {"nome": "Bone Dart", "escola": "Necromancer", "descricao": "Projétil de osso negro conjurado magicamente.", "alcance": "12\""}
  ],
  "itens": [
    {"nome":"Potion of Healing","grupo":"Poção","descricao":"+5 HP. Pode ser usada uma vez para restaurar 5 pontos de vida."},
    {"nome":"Magic Sword","grupo":"Arma","descricao":"+2 Fight. Apenas arma principal."}
  ],
  "personagens": [
    {"tipo":"Mago","nome":"Mestre da Neve","stats":{"move":6,"fight":"+2","shoot":"+0","armor":10,"will":"+4","hp":14}},
    {"tipo":"Aprendiz","nome":"Aprendiz","stats":{"move":6,"fight":"+0","shoot":"+0","armor":10,"will":"+2","hp":10}},
    {"tipo":"Infantryman","nome":"Infantaria","stats":{"move":6,"fight":"+3","shoot":"+0","armor":11,"will":"0","hp":12}}
  ],
  "bestiario": [
    {"nome":"Giant Rat","tipo":"Animal","desc":"Roedor agressivo e rápido","explicacao":"Aparecem em grupos.","stats":{"move":7,"fight":"+0","shoot":"-","armor":8,"will":"-1","hp":6}},
    {"nome":"Zombie","tipo":"Morto-vivo","desc":"Lento mas persistente","explicacao":"Não pode correr.","stats":{"move":4,"fight":"+0","shoot":"-","armor":12,"will":"-2","hp":12}}
  ]
};

/* --- Renderização do Bestiário --- */
function renderBestiario() {
  const bestDiv = document.getElementById('bestiary-list');
  if (!bestDiv) return;
  bestDiv.innerHTML = "";
  const bestiario = conteudo_frostgrave_json.bestiario || [];
  if (!bestiario.length) {
    bestDiv.innerHTML = "<div style='color:#888'>Nenhuma criatura cadastrada.</div>";
    return;
  }
  let cats = {};
  bestiario.forEach(b => {
    cats[b.tipo] = cats[b.tipo] || [];
    cats[b.tipo].push(b);
  });
  bestDiv.innerHTML = `<div class="beastiary-cats">${
    Object.keys(cats).sort().map(cat =>
      `<div class="beast-cat">
        <h3>${cat}</h3>
        ${cats[cat].map(b => `
          <div class="beast-card">
            <div class="beast-header">
              <span style="font-weight:bold">${b.nome}</span>
            </div>
            <div class="beast-desc">${b.desc}</div>
            ${b.explicacao ? `<div class="beast-expl">${b.explicacao}</div>` : ""}
            <div class="beast-stats">
              <span><b>Mov:</b> ${b.stats.move}</span>
              <span><b>Fight:</b> ${b.stats.fight}</span>
              <span><b>Shoot:</b> ${b.stats.shoot}</span>
              <span><b>Armor:</b> ${b.stats.armor}</span>
              <span><b>Will:</b> ${b.stats.will}</span>
              <span><b>HP:</b> ${b.stats.hp}</span>
            </div>
          </div>
        `).join('')}
      </div>`
    ).join('')}
    </div>`;
}

/* --- Renderização de Magias --- */
function renderBancoMagias() {
  const ul = document.getElementById('banco-magias-lista');
  if (!ul) return;
  ul.innerHTML = '';
  (conteudo_frostgrave_json.magias || []).forEach(m => {
    ul.innerHTML += `<li>
      <b title="${m.descricao || ''}">${m.nome}</b> <span style="color:#888">(${m.escola})</span>
      ${m.alcance ? `<span style="color:#229954; margin-left:1em;">Alcance: ${m.alcance}</span>` : ''}
      ${m.descricao ? `<br><span style="font-size:0.98em;color:#555">${m.descricao}</span>` : ''}
    </li>`;
  });
}

/* --- Renderização de Itens --- */
function renderBancoItens() {
  const ul = document.getElementById('banco-itens-lista');
  if (!ul) return;
  ul.innerHTML = '';
  (conteudo_frostgrave_json.itens || []).forEach(item => {
    ul.innerHTML += `<li>
      <b>${item.nome}</b> <span style="color:#888">[${item.grupo}]</span>
      <span style="color:#229954; margin-left:1em;">${item.descricao}</span>
    </li>`;
  });
}

/* --- Renderização de Personagens --- */
function renderPersonagens() {
  // Mago & Aprendiz
  const magos = conteudo_frostgrave_json.personagens.filter(p => p.tipo === 'Mago' || p.tipo === 'Aprendiz');
  const soldados = conteudo_frostgrave_json.personagens.filter(p => p.tipo !== 'Mago' && p.tipo !== 'Aprendiz');
  const magoDiv = document.getElementById('mago-aprendiz-lista');
  const soldDiv = document.getElementById('soldado-lista');
  if (magoDiv) magoDiv.innerHTML = magos.map(p => renderPersonagemCard(p)).join('');
  if (soldDiv) soldDiv.innerHTML = soldados.map(p => renderPersonagemCard(p)).join('');
}
function renderPersonagemCard(p) {
  return `<div class="person-card">
    <div class="person-header">
      <span class="tipo-${p.tipo.toLowerCase()}">${p.tipo}</span>
      <b>${p.nome || ''}</b>
    </div>
    <div class="stats-line">
      <span class="stat-label">Mov:</span> <span>${p.stats.move}</span>
      <span class="stat-label">Fight:</span> <span>${p.stats.fight}</span>
      <span class="stat-label">Shoot:</span> <span>${p.stats.shoot}</span>
      <span class="stat-label">Armor:</span> <span>${p.stats.armor}</span>
      <span class="stat-label">Will:</span> <span>${p.stats.will}</span>
      <span class="stat-label">HP:</span> <span>${p.stats.hp}</span>
    </div>
  </div>`;
}

/* --- Inicialização --- */
window.onload = function() {
  renderBestiario();
  renderBancoMagias();
  renderBancoItens();
  renderPersonagens();
};
</script>
</body>
</html>
