<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Frostgrave Warband Manager</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* ...[restante do CSS igual ao anterior]... */
    </style>
</head>
<body>
<main>
    <h1>Frostgrave Warband Manager</h1>
    <nav>
        <button class="active" onclick="showTab('dashboard')">Dashboard</button>
        <button onclick="showTab('magias')">Magias</button>
        <button onclick="showTab('itens')">Itens</button>
        <button onclick="showTab('notas')">Notas</button>
    </nav>
    <!-- DASHBOARD -->
    <section id="dashboard" class="tab-content active">
        <h2>Magos & Aprendiz</h2>
        <ul class="flex-wrap" id="mago-aprendiz-lista"></ul>
        <div class="add-mago-aprendiz-btns">
            <button onclick="adicionarMago()">+ Adicionar Mago</button>
            <button onclick="adicionarAprendiz()">+ Adicionar Aprendiz</button>
        </div>
        <h2>Soldados</h2>
        <ul class="flex-wrap" id="soldado-lista"></ul>
        <section class="add-section">
            <h2>Adicionar Soldado</h2>
            <div class="soldado-limit-alert" id="soldado-limit-alert"></div>
            <form class="add-form add-form-soldado" id="add-soldado-form">
                <label>
                    Tipo de Soldado:
                    <select id="soldado-tipo"></select>
                </label>
                <label>
                    Nome:
                    <input id="soldado-nome" type="text" maxlength="40" placeholder="Opcional">
                </label>
                <button type="submit">Adicionar Soldado</button>
            </form>
        </section>
    </section>
    <!-- MAGIAS -->
    <!-- ...[restante do HTML igual ao anterior]... -->
</main>
<script>
// --- Magias e Itens [igual ao anterior] ---

// LISTA CORRETA DE SOLDADOS FROSTGRAVE 2ª EDIÇÃO
const SOLDADOS_NORMAIS = [
    "Thief",
    "Thug",
    "War Dog",
    "Infantryman",
    "Man-at-Arms" // Corrigido: Man-at-Arms é normal!
];
const SOLDADOS_ELITES = [
    "Archer",
    "Barbarian",
    "Crossbowman",
    "Knight",
    "Marksman",
    "Ranger",
    "Templar",
    "Tracker",
    "Treasure Hunter",
    "Apothecary",
    "Crowmaster",
    "Pack Mule",
    "Trap Expert",
    "Witch Doctor"
];
const SOLDADOS_PADRAO = {
  "Archer":          { move:6, fight:0, shoot:+2, armor:11, will:0, hp:10 },
  "Barbarian":       { move:6, fight:+4, shoot:0, armor:10, will:0, hp:12 },
  "Crossbowman":     { move:6, fight:0, shoot:+2, armor:11, will:0, hp:10 },
  "Infantryman":     { move:6, fight:+2, shoot:0, armor:12, will:0, hp:12 },
  "Knight":          { move:6, fight:+3, shoot:0, armor:14, will:0, hp:12 },
  "Man-at-Arms":     { move:6, fight:+3, shoot:0, armor:13, will:0, hp:12 },
  "Marksman":        { move:6, fight:0, shoot:+3, armor:11, will:0, hp:10 },
  "Ranger":          { move:7, fight:+2, shoot:+2, armor:11, will:0, hp:12 },
  "Templar":         { move:6, fight:+4, shoot:0, armor:12, will:0, hp:12 },
  "Thief":           { move:7, fight:+1, shoot:0, armor:10, will:0, hp:10 },
  "Tracker":         { move:7, fight:+1, shoot:+2, armor:11, will:0, hp:10 },
  "Treasure Hunter": { move:7, fight:+3, shoot:0, armor:12, will:0, hp:12 },
  "Thug":            { move:6, fight:+2, shoot:0, armor:10, will:0, hp:10 },
  "War Dog":         { move:8, fight:+1, shoot:0, armor:10, will:0, hp:8 },
  "Apothecary":      { move:6, fight:0, shoot:0, armor:10, will:0, hp:10 },
  "Crowmaster":      { move:6, fight:0, shoot:0, armor:10, will:0, hp:10 },
  "Pack Mule":       { move:6, fight:0, shoot:0, armor:10, will:0, hp:10 },
  "Trap Expert":     { move:7, fight:0, shoot:0, armor:10, will:0, hp:10 },
  "Witch Doctor":    { move:6, fight:0, shoot:0, armor:10, will:0, hp:10 }
};
const SOLDADOS_NORMAIS_SET = new Set(SOLDADOS_NORMAIS);
const SOLDADOS_ELITES_SET = new Set(SOLDADOS_ELITES);

// ...[restante das funções do código igual ao anterior]...

// Preenche dropdown de soldados padrão com separação e bloqueio por limite
function renderSoldadoDropdown() {
    let soldadoSel = document.getElementById('soldado-tipo');
    let {norm, elite} = contarSoldados();
    let normDisabled = norm>=4;
    let eliteDisabled = elite>=4;
    let html = "";
    html += `<optgroup label="Normais">`;
    for(const k of SOLDADOS_NORMAIS) {
        html += `<option value="${k}"${normDisabled?" disabled":""}>${k}</option>`;
    }
    html += `</optgroup>`;
    html += `<optgroup label="Elites">`;
    for(const k of SOLDADOS_ELITES) {
        html += `<option value="${k}"${eliteDisabled?" disabled":""}>${k}</option>`;
    }
    html += `</optgroup>`;
    soldadoSel.innerHTML = html;
}
renderSoldadoDropdown();

// ...[restante do JS igual ao anterior]...
</script>
</body>
</html>
