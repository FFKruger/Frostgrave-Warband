<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Comprar Soldados - Frostgrave Warband Manager</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Arial, sans-serif; background: #eaf2f8; margin: 0; }
        main { max-width: 900px; margin: 2em auto; background: #fff; border-radius: 8px; padding: 2em; box-shadow: 0 2px 12px #bbb6;}
        h1 { text-align: center; }
        .soldier-card { border: 1px solid #bbb; background: #f6f9fa; margin-bottom: 1em; border-radius: 7px; padding: 1em;}
        .flex-row { display: flex; gap: 1.5em; }
        .soldier-desc { color: #444; font-size: 0.96em; margin: 0.3em 0; }
        .buy-btn { background: #2980b9; color: #fff; font-weight: bold; border: none; border-radius: 4px; padding: 0.4em 1em; cursor: pointer;}
        .buy-btn[disabled] { background: #aaa; color: #eee; cursor: not-allowed; }
        select, input { border-radius: 4px; padding: .4em; border: 1px solid #bbb; }
        label { font-weight: bold; margin-right: .7em; }
        .selected-list { background: #f2f6fa; border-radius: 6px; padding: 1em; margin-bottom: 2em;}
        .remove-btn { background: #c0392b; color: #fff; border: none; border-radius: 4px; padding: 0.2em 0.7em; margin-left: 1em;}
    </style>
</head>
<body>
<main>
    <h1>Comprar Soldados</h1>
    <div style="margin-bottom:2em;">
        <label>Filtrar por tipo:
            <select id="filter-type">
                <option value="">Todos</option>
                <option>Thug</option><option>Thief</option>
                <option>Archer</option><option>Crossbowman</option>
                <option>Man-at-Arms</option><option>Knight</option>
                <option>Templar</option><option>Barbarian</option>
                <option>Tracker</option><option>Warhound</option>
                <option>Infantryman</option>
            </select>
        </label>
        <label>Buscar:
            <input id="filter-name" type="text" placeholder="Nome ou tipo">
        </label>
    </div>
    <section class="selected-list" id="selected-soldiers-section">
        <h2>Soldados Comprados</h2>
        <ul id="selected-soldiers"></ul>
    </section>
    <section>
        <h2>Todos Soldados Disponíveis</h2>
        <div id="soldier-list"></div>
    </section>
</main>
<script>
    // Exemplo de soldados disponíveis (substitua pelos dados do seu localStorage se desejar)
    let soldadosDisponiveis = JSON.parse(localStorage.getItem('soldados_compra') || '[]');
    if(soldadosDisponiveis.length === 0) {
        soldadosDisponiveis = [
            {tipo:"Thug", custo:20, hp:10, desc:"Soldado simples, barato e corajoso."},
            {tipo:"Archer", custo:50, hp:10, desc:"Especialista em ataques à distância com arco."},
            {tipo:"Knight", custo:100, hp:12, desc:"Pesadamente armado e protegido."}
        ];
    }

    let soldadosComprados = JSON.parse(localStorage.getItem('soldados_comprados') || '[]');

    function renderSoldiers() {
        const type = document.getElementById('filter-type').value;
        const name = document.getElementById('filter-name').value.toLowerCase();
        let html = "";
        soldadosDisponiveis.forEach((sold, idx) => {
            if((!type || sold.tipo===type) &&
                (!name || sold.tipo.toLowerCase().includes(name) || (sold.desc||"").toLowerCase().includes(name))
            ) {
                const isBought = soldadosComprados.find(s=>s.tipo===sold.tipo);
                html += `<div class="soldier-card">
                    <strong>${sold.tipo}</strong>
                    <div class="soldier-desc">${sold.desc||""}</div>
                    <div><b>HP:</b> ${sold.hp} &nbsp; <b>Custo:</b> ${sold.custo}g</div>
                    <button class="buy-btn" onclick="buySoldier(${idx})" ${isBought?'disabled':''}>
                        ${isBought?'Comprado':'Comprar'}
                    </button>
                </div>`;
            }
        });
        document.getElementById('soldier-list').innerHTML = html;
    }
    function renderBought() {
        let html = "";
        soldadosComprados.forEach((sold, idx) => {
            html += `<li>${sold.tipo} 
                <button class="remove-btn" onclick="removeSoldier(${idx})">Remover</button>
            </li>`;
        });
        document.getElementById('selected-soldiers').innerHTML = html || "<li>Nenhum soldado comprado.</li>";
    }
    function buySoldier(idx) {
        const sold = soldadosDisponiveis[idx];
        if(!soldadosComprados.find(s=>s.tipo===sold.tipo)) {
            soldadosComprados.push(sold);
            localStorage.setItem('soldados_comprados', JSON.stringify(soldadosComprados));
            renderSoldiers(); renderBought();
        }
    }
    function removeSoldier(idx) {
        soldadosComprados.splice(idx,1);
        localStorage.setItem('soldados_comprados', JSON.stringify(soldadosComprados));
        renderSoldiers(); renderBought();
    }
    document.getElementById('filter-type').onchange = renderSoldiers;
    document.getElementById('filter-name').oninput = renderSoldiers;
    renderSoldiers(); renderBought();
</script>
</body>
</html>